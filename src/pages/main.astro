---
import Layout from "@layouts/Layout.astro";
import Tasks from "@components/react/Tasks/Tasks";
import Calendar from "@components/react/Calendar/Calendar";
import { APP_DATA } from "@utils/constants";
import { getCurrentUser } from "@lib/supabase";

const { error } = await getCurrentUser();

// If there is an error, it means the user is not logged in
if (error) {
    return Astro.redirect("/denied")
}
---

<Layout title={APP_DATA.name}>
    <Tasks client:load />
    <Calendar client:load />
</Layout>
